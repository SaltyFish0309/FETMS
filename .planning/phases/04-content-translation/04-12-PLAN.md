---
phase: 04-content-translation
plan: 12
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/src/pages/ProjectSettings.tsx
  - frontend/src/pages/StageSettings.tsx
  - frontend/src/pages/PreferencesSettings.tsx
  - frontend/src/pages/ImportSettings.tsx
  - frontend/src/components/projects/CreateProjectDialog.tsx
  - frontend/src/components/projects/EditProjectDialog.tsx
  - frontend/src/components/settings/CreateStageDialog.tsx
  - frontend/src/components/settings/SortableStageItem.tsx
  - frontend/public/locales/en/settings.json
  - frontend/public/locales/zh-TW/settings.json
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Settings card content displays in selected language"
    - "Project Settings page and dialogs fully translated"
    - "Stage Settings page and dialogs fully translated"
    - "Preferences Settings card content translated"
    - "Import Settings page content translated"
  artifacts:
    - path: "frontend/src/pages/ProjectSettings.tsx"
      provides: "Project settings page translations"
      contains: "useTranslation.*settings"
    - path: "frontend/src/pages/StageSettings.tsx"
      provides: "Stage settings page translations"
      contains: "useTranslation.*settings"
    - path: "frontend/src/pages/PreferencesSettings.tsx"
      provides: "Preferences settings translations"
      contains: "useTranslation.*settings"
    - path: "frontend/src/pages/ImportSettings.tsx"
      provides: "Import settings translations"
      contains: "useTranslation.*settings"
    - path: "frontend/public/locales/en/settings.json"
      provides: "English keys for all settings pages"
      contains: "projects"
    - path: "frontend/public/locales/zh-TW/settings.json"
      provides: "Chinese translations for all settings pages"
      contains: "projects"
  key_links:
    - from: "frontend/src/pages/ProjectSettings.tsx"
      to: "frontend/public/locales/*/settings.json"
      via: "useTranslation('settings')"
      pattern: "projects\\."
    - from: "frontend/src/components/projects/CreateProjectDialog.tsx"
      to: "frontend/public/locales/*/settings.json"
      via: "useTranslation('settings')"
      pattern: "projectDialog\\."
    - from: "frontend/src/pages/StageSettings.tsx"
      to: "frontend/public/locales/*/settings.json"
      via: "useTranslation('settings')"
      pattern: "stages\\."
    - from: "frontend/src/components/settings/CreateStageDialog.tsx"
      to: "frontend/public/locales/*/settings.json"
      via: "useTranslation('settings')"
      pattern: "stageDialog\\."
---

<objective>
Translate all remaining Settings page content and dialogs to close final UAT gap.

Purpose: Fix UAT Test 3 failure - Settings cards are translated but their content is not. This is the largest remaining gap, covering ~200+ hardcoded strings across 10 files in the Settings subsystem.

Output: Complete i18n integration for Project Settings, Stage Settings, Preferences Settings, Import Settings, and all associated dialogs.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-content-translation/04-02-SUMMARY.md

**Pattern established in 04-02:**
- Settings page uses 'settings' namespace
- Main Settings page cards already translated
- Individual setting pages need content translation

**Gap from UAT:**
Test 3: "The 5 cards in Settings are translated successfully. However, the content in each card is not."

Root cause: 10 components have hardcoded English strings and no i18n integration:
1. ProjectSettings.tsx
2. StageSettings.tsx
3. PreferencesSettings.tsx
4. ImportSettings.tsx
5. CreateProjectDialog.tsx
6. EditProjectDialog.tsx
7. CreateStageDialog.tsx
8. SortableStageItem.tsx

Note: AlertSettings and AlertRuleDialog are covered in Plan 04-11.

**Reference files to review:**
@frontend/src/pages/ProjectSettings.tsx
@frontend/src/pages/StageSettings.tsx
@frontend/src/pages/PreferencesSettings.tsx
@frontend/src/pages/ImportSettings.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add translation keys for all settings pages and dialogs</name>
  <files>
    frontend/public/locales/en/settings.json
    frontend/public/locales/zh-TW/settings.json
  </files>
  <action>
Add comprehensive translation keys for Project Settings, Stage Settings, Preferences Settings, and Import Settings.

**In en/settings.json, add:**
```json
"projects": {
  "page": {
    "title": "Project Settings",
    "subtitle": "Manage recruitment projects and templates",
    "addButton": "Create Project"
  },
  "table": {
    "columns": {
      "name": "Project Name",
      "description": "Description",
      "status": "Status",
      "createdAt": "Created",
      "actions": "Actions"
    },
    "empty": "No projects yet"
  },
  "dialog": {
    "createTitle": "Create Project",
    "editTitle": "Edit Project",
    "description": "Set up a new recruitment project",
    "fields": {
      "name": {
        "label": "Project Name",
        "placeholder": "Enter project name"
      },
      "description": {
        "label": "Description",
        "placeholder": "Enter project description"
      },
      "status": {
        "label": "Status",
        "active": "Active",
        "inactive": "Inactive"
      }
    },
    "buttons": {
      "cancel": "Cancel",
      "create": "Create",
      "save": "Save Changes"
    }
  },
  "toast": {
    "createSuccess": "Project created successfully",
    "updateSuccess": "Project updated successfully",
    "deleteSuccess": "Project deleted successfully",
    "error": "Operation failed"
  }
},
"stages": {
  "page": {
    "title": "Pipeline Stages",
    "subtitle": "Customize recruitment pipeline stages",
    "addButton": "Add Stage",
    "reorderHint": "Drag to reorder stages"
  },
  "dialog": {
    "title": "Create Stage",
    "description": "Add a new stage to the recruitment pipeline",
    "fields": {
      "name": {
        "label": "Stage Name",
        "placeholder": "Enter stage name"
      },
      "description": {
        "label": "Description",
        "placeholder": "Enter stage description"
      },
      "color": {
        "label": "Color",
        "placeholder": "Select color"
      }
    },
    "buttons": {
      "cancel": "Cancel",
      "create": "Create Stage"
    }
  },
  "item": {
    "dragHandle": "Drag to reorder",
    "edit": "Edit",
    "delete": "Delete"
  },
  "toast": {
    "createSuccess": "Stage created successfully",
    "updateSuccess": "Stage updated successfully",
    "deleteSuccess": "Stage deleted successfully",
    "reorderSuccess": "Stages reordered successfully",
    "error": "Operation failed"
  }
},
"preferences": {
  "page": {
    "title": "Preferences",
    "subtitle": "Customize your experience"
  },
  "sections": {
    "appearance": {
      "title": "Appearance",
      "theme": {
        "label": "Theme",
        "light": "Light",
        "dark": "Dark",
        "system": "System"
      }
    },
    "language": {
      "title": "Language & Region",
      "language": {
        "label": "Language",
        "en": "English",
        "zhTW": "繁體中文"
      }
    }
  }
},
"import": {
  "page": {
    "title": "Import & Export",
    "subtitle": "Manage data import and export operations"
  },
  "sections": {
    "import": {
      "title": "Import Data",
      "description": "Upload CSV files to import teachers or schools",
      "teachers": "Import Teachers",
      "schools": "Import Schools"
    },
    "export": {
      "title": "Export Data",
      "description": "Download your data in CSV format",
      "teachers": "Export Teachers",
      "schools": "Export Schools",
      "allData": "Export All Data"
    },
    "templates": {
      "title": "CSV Templates",
      "description": "Download template files for imports",
      "teachersTemplate": "Download Teachers Template",
      "schoolsTemplate": "Download Schools Template"
    }
  },
  "toast": {
    "exportSuccess": "Data exported successfully",
    "exportError": "Export failed"
  }
}
```

**In zh-TW/settings.json, add:**
```json
"projects": {
  "page": {
    "title": "專案設定",
    "subtitle": "管理招募專案和範本",
    "addButton": "建立專案"
  },
  "table": {
    "columns": {
      "name": "專案名稱",
      "description": "說明",
      "status": "狀態",
      "createdAt": "建立時間",
      "actions": "操作"
    },
    "empty": "尚無專案"
  },
  "dialog": {
    "createTitle": "建立專案",
    "editTitle": "編輯專案",
    "description": "設定新的招募專案",
    "fields": {
      "name": {
        "label": "專案名稱",
        "placeholder": "輸入專案名稱"
      },
      "description": {
        "label": "說明",
        "placeholder": "輸入專案說明"
      },
      "status": {
        "label": "狀態",
        "active": "啟用",
        "inactive": "停用"
      }
    },
    "buttons": {
      "cancel": "取消",
      "create": "建立",
      "save": "儲存變更"
    }
  },
  "toast": {
    "createSuccess": "專案建立成功",
    "updateSuccess": "專案更新成功",
    "deleteSuccess": "專案刪除成功",
    "error": "操作失敗"
  }
},
"stages": {
  "page": {
    "title": "流程階段",
    "subtitle": "自訂招募流程階段",
    "addButton": "新增階段",
    "reorderHint": "拖曳以重新排序階段"
  },
  "dialog": {
    "title": "建立階段",
    "description": "新增招募流程階段",
    "fields": {
      "name": {
        "label": "階段名稱",
        "placeholder": "輸入階段名稱"
      },
      "description": {
        "label": "說明",
        "placeholder": "輸入階段說明"
      },
      "color": {
        "label": "顏色",
        "placeholder": "選擇顏色"
      }
    },
    "buttons": {
      "cancel": "取消",
      "create": "建立階段"
    }
  },
  "item": {
    "dragHandle": "拖曳以重新排序",
    "edit": "編輯",
    "delete": "刪除"
  },
  "toast": {
    "createSuccess": "階段建立成功",
    "updateSuccess": "階段更新成功",
    "deleteSuccess": "階段刪除成功",
    "reorderSuccess": "階段順序更新成功",
    "error": "操作失敗"
  }
},
"preferences": {
  "page": {
    "title": "偏好設定",
    "subtitle": "自訂您的使用體驗"
  },
  "sections": {
    "appearance": {
      "title": "外觀",
      "theme": {
        "label": "主題",
        "light": "淺色",
        "dark": "深色",
        "system": "系統"
      }
    },
    "language": {
      "title": "語言與地區",
      "language": {
        "label": "語言",
        "en": "English",
        "zhTW": "繁體中文"
      }
    }
  }
},
"import": {
  "page": {
    "title": "匯入與匯出",
    "subtitle": "管理資料匯入和匯出操作"
  },
  "sections": {
    "import": {
      "title": "匯入資料",
      "description": "上傳 CSV 檔案以匯入教師或學校",
      "teachers": "匯入教師",
      "schools": "匯入學校"
    },
    "export": {
      "title": "匯出資料",
      "description": "下載 CSV 格式的資料",
      "teachers": "匯出教師",
      "schools": "匯出學校",
      "allData": "匯出全部資料"
    },
    "templates": {
      "title": "CSV 範本",
      "description": "下載匯入用的範本檔案",
      "teachersTemplate": "下載教師範本",
      "schoolsTemplate": "下載學校範本"
    }
  },
  "toast": {
    "exportSuccess": "資料匯出成功",
    "exportError": "匯出失敗"
  }
}
```

Preserve existing settings.json structure and merge these keys with existing content (alerts section from 04-11).
  </action>
  <verify>
Check both files have valid JSON syntax:
```bash
cd frontend && npm run build
```
No JSON parse errors should occur.
  </verify>
  <done>Both settings.json locale files contain complete projects, stages, preferences, and import sections.</done>
</task>

<task type="auto">
  <name>Task 2: Integrate i18n in Project Settings pages and dialogs</name>
  <files>
    frontend/src/pages/ProjectSettings.tsx
    frontend/src/components/projects/CreateProjectDialog.tsx
    frontend/src/components/projects/EditProjectDialog.tsx
  </files>
  <action>
For each of the three files:

**ProjectSettings.tsx:**
1. Import useTranslation: `import { useTranslation } from 'react-i18next';`
2. Add hook: `const { t } = useTranslation('settings');`
3. Replace all UI text:
   - Page title: t('projects.page.title')
   - Subtitle: t('projects.page.subtitle')
   - Add button: t('projects.page.addButton')
   - Table columns: t('projects.table.columns.*')
   - Empty state: t('projects.table.empty')
   - Toast messages: t('projects.toast.*')

**CreateProjectDialog.tsx:**
1. Import useTranslation hook
2. Add hook: `const { t } = useTranslation('settings');`
3. Replace all UI text:
   - Dialog title: t('projects.dialog.createTitle')
   - Description: t('projects.dialog.description')
   - Field labels: t('projects.dialog.fields.*.label')
   - Placeholders: t('projects.dialog.fields.*.placeholder')
   - Buttons: t('projects.dialog.buttons.cancel'), t('projects.dialog.buttons.create')

**EditProjectDialog.tsx:**
1. Import useTranslation hook
2. Add hook: `const { t } = useTranslation('settings');`
3. Replace all UI text:
   - Dialog title: t('projects.dialog.editTitle')
   - Same field/button pattern as CreateProjectDialog
   - Submit button: t('projects.dialog.buttons.save')

Preserve all existing project CRUD logic, form validation, state management, and styling.
  </action>
  <verify>
1. Check all three files have useTranslation:
```bash
grep "useTranslation" frontend/src/pages/ProjectSettings.tsx frontend/src/components/projects/CreateProjectDialog.tsx frontend/src/components/projects/EditProjectDialog.tsx
```

2. Verify no hardcoded "Project" or "Create" strings:
```bash
grep -E '"(Project Settings|Create Project|Edit Project)"' frontend/src/pages/ProjectSettings.tsx frontend/src/components/projects/*.tsx
```
Should return minimal matches.

3. Build succeeds:
```bash
cd frontend && npm run build
```
  </verify>
  <done>Project Settings page and dialogs use useTranslation('settings') hook with all UI text translated.</done>
</task>

<task type="auto">
  <name>Task 3: Integrate i18n in Stage Settings page and dialogs</name>
  <files>
    frontend/src/pages/StageSettings.tsx
    frontend/src/components/settings/CreateStageDialog.tsx
    frontend/src/components/settings/SortableStageItem.tsx
  </files>
  <action>
For each of the three files:

**StageSettings.tsx:**
1. Import useTranslation: `import { useTranslation } from 'react-i18next';`
2. Add hook: `const { t } = useTranslation('settings');`
3. Replace all UI text:
   - Page title: t('stages.page.title')
   - Subtitle: t('stages.page.subtitle')
   - Add button: t('stages.page.addButton')
   - Reorder hint: t('stages.page.reorderHint')
   - Toast messages: t('stages.toast.*')

**CreateStageDialog.tsx:**
1. Import useTranslation hook
2. Add hook: `const { t } = useTranslation('settings');`
3. Replace all UI text:
   - Dialog title: t('stages.dialog.title')
   - Description: t('stages.dialog.description')
   - Field labels: t('stages.dialog.fields.*.label')
   - Placeholders: t('stages.dialog.fields.*.placeholder')
   - Buttons: t('stages.dialog.buttons.cancel'), t('stages.dialog.buttons.create')

**SortableStageItem.tsx:**
1. Import useTranslation hook
2. Add hook: `const { t } = useTranslation('settings');`
3. Replace button labels:
   - Drag handle tooltip: t('stages.item.dragHandle')
   - Edit button: t('stages.item.edit')
   - Delete button: t('stages.item.delete')

Preserve all existing stage management logic, drag-and-drop functionality, reordering logic, and styling.
  </action>
  <verify>
1. Check all three files have useTranslation:
```bash
grep "useTranslation" frontend/src/pages/StageSettings.tsx frontend/src/components/settings/CreateStageDialog.tsx frontend/src/components/settings/SortableStageItem.tsx
```

2. Verify no hardcoded "Stage" or "Pipeline" strings:
```bash
grep -E '"(Pipeline Stages|Create Stage|Add Stage)"' frontend/src/pages/StageSettings.tsx frontend/src/components/settings/*.tsx
```
Should return minimal matches.

3. Build succeeds:
```bash
cd frontend && npm run build
```
  </verify>
  <done>Stage Settings page and dialogs use useTranslation('settings') hook with all UI text translated.</done>
</task>

<task type="auto">
  <name>Task 4: Integrate i18n in Preferences and Import Settings pages</name>
  <files>
    frontend/src/pages/PreferencesSettings.tsx
    frontend/src/pages/ImportSettings.tsx
  </files>
  <action>
**PreferencesSettings.tsx:**
1. Import useTranslation: `import { useTranslation } from 'react-i18next';`
2. Add hook: `const { t } = useTranslation('settings');`
3. Replace all UI text:
   - Page title: t('preferences.page.title')
   - Subtitle: t('preferences.page.subtitle')
   - Section titles: t('preferences.sections.appearance.title'), t('preferences.sections.language.title')
   - Theme labels: t('preferences.sections.appearance.theme.label')
   - Theme options: t('preferences.sections.appearance.theme.light'), t('preferences.sections.appearance.theme.dark'), t('preferences.sections.appearance.theme.system')
   - Language label: t('preferences.sections.language.language.label')
   - Language options: t('preferences.sections.language.language.en'), t('preferences.sections.language.language.zhTW')

Note: Theme and Language toggles may already be partially translated from Phase 03. Ensure consistency.

**ImportSettings.tsx:**
1. Import useTranslation hook
2. Add hook: `const { t } = useTranslation('settings');`
3. Replace all UI text:
   - Page title: t('import.page.title')
   - Subtitle: t('import.page.subtitle')
   - Import section: t('import.sections.import.title'), t('import.sections.import.description')
   - Import buttons: t('import.sections.import.teachers'), t('import.sections.import.schools')
   - Export section: t('import.sections.export.title'), t('import.sections.export.description')
   - Export buttons: t('import.sections.export.teachers'), t('import.sections.export.schools'), t('import.sections.export.allData')
   - Templates section: t('import.sections.templates.title'), t('import.sections.templates.description')
   - Template buttons: t('import.sections.templates.teachersTemplate'), t('import.sections.templates.schoolsTemplate')
   - Toast messages: t('import.toast.exportSuccess'), t('import.toast.exportError')

Preserve all existing import/export functionality, file handling, and download logic.
  </action>
  <verify>
1. Check both files have useTranslation:
```bash
grep "useTranslation" frontend/src/pages/PreferencesSettings.tsx frontend/src/pages/ImportSettings.tsx
```

2. Verify no hardcoded "Preferences" or "Import" strings:
```bash
grep -E '"(Preferences|Import|Export|Templates)"' frontend/src/pages/PreferencesSettings.tsx frontend/src/pages/ImportSettings.tsx
```
Should return minimal matches.

3. Build succeeds:
```bash
cd frontend && npm run build
```
  </verify>
  <done>Preferences and Import Settings pages use useTranslation('settings') hook with all UI text translated.</done>
</task>

</tasks>

<verification>
1. Visit Settings page
2. Switch language to Traditional Chinese
3. Navigate to each settings tab and verify:
   - Project Settings: Page title, table headers, Create/Edit dialog all in Chinese
   - Stage Settings: Page title, stage items, Create dialog all in Chinese
   - Preferences: Theme and language labels in Chinese
   - Import & Export: All section titles and buttons in Chinese
4. Test creating/editing projects and stages - verify all form fields and toast messages in Chinese
5. Switch back to English and verify all settings pages display in English
</verification>

<success_criteria>
- All Settings page content displays in selected language
- Project Settings page and dialogs fully translated
- Stage Settings page and dialogs fully translated
- Preferences Settings shows translated labels
- Import Settings page fully translated
- All ~200+ hardcoded strings replaced with translation keys
- UAT Test 3 gap closed: Settings card content fully translated
</success_criteria>

<output>
After completion, create `.planning/phases/04-content-translation/04-12-SUMMARY.md`
</output>
