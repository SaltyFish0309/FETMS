---
phase: 02-component-dark-mode-coverage
plan: 06
type: execute
wave: 3
depends_on:
  - 02-01
  - 02-02
  - 02-03
  - 02-04
  - 02-05
files_modified:
  - frontend/src/index.css
autonomous: false

must_haves:
  truths:
    - "Theme transitions are smooth without jarring color jumps"
    - "All text meets WCAG AA 4.5:1 contrast ratio in dark mode"
    - "Focus indicators are visible in both light and dark modes"
    - "No hardcoded slate/white colors remain in application components"
  artifacts:
    - path: "frontend/src/index.css"
      provides: "Smooth theme transitions"
      contains: "transition-colors"
  key_links:
    - from: "All component files"
      to: "CSS variables in index.css"
      via: "Semantic Tailwind classes"
      pattern: "(bg-card|text-foreground|text-muted-foreground|bg-muted|border-border)"
---

<objective>
Add smooth theme transitions and verify WCAG AA contrast compliance across all components.

Purpose: Per user decisions, theme transitions should be smooth without visual glitches, and focus indicators must be high contrast (WCAG AAA) for accessibility. This plan adds transition utilities and performs final verification.

Output: Polished dark mode experience with smooth transitions and verified accessibility compliance.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/02-component-dark-mode-coverage/02-CONTEXT.md
@.planning/phases/02-component-dark-mode-coverage/02-RESEARCH.md
@frontend/src/index.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add smooth theme transition utilities</name>
  <files>frontend/src/index.css</files>
  <action>
Add transition utilities to the base layer in index.css for smooth theme switching.

In the `@layer base` section, add transition for color-related properties:

```css
@layer base {
  * {
    @apply border-border outline-ring/50;
  }

  body {
    @apply bg-background text-foreground font-sans antialiased;
  }

  /* Smooth theme transitions */
  *,
  *::before,
  *::after {
    @apply transition-colors duration-200;
  }

  /* Respect reduced motion preference */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      transition-duration: 0.01ms !important;
    }
  }
}
```

This ensures:
1. All color properties (background, text, border) transition smoothly when theme changes
2. 200ms duration is fast enough to feel responsive but slow enough to be noticeable
3. Users who prefer reduced motion get instant transitions (respects accessibility preference)
  </action>
  <verify>
`npm run build --prefix frontend` passes.
`grep -E "transition-colors|prefers-reduced-motion" frontend/src/index.css` should return matches.
  </verify>
  <done>
index.css includes transition-colors utility for smooth theme switching with prefers-reduced-motion support.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete dark mode implementation across all application components:
- Layout components (Header, Sidebar) use semantic colors
- Dashboard components (KPICard, charts, widgets) adapt to theme
- All pages (Teachers, Schools, Settings) use semantic colors
- Interactive components (ViewModeToggle, DataTable, Kanban) have proper dark styling
- Theme transitions are smooth with reduced-motion support
  </what-built>
  <how-to-verify>
1. Start the dev server: `npm run dev --prefix frontend`
2. Open http://localhost:5173 in browser

**Theme switching test:**
3. Navigate to Settings > User Preferences
4. Toggle between Light, Dark, and System themes
5. Verify transition is smooth (no jarring color jumps)

**Dark mode visual inspection (in Dark mode):**
6. **Dashboard:** Check KPI cards are readable, charts have visible axis labels, candidate list has proper contrast
7. **Teachers page:** Verify page heading, search input, and table/kanban have proper contrast
8. **Schools page:** Check filter bar background, table rows, and hover states
9. **Settings page:** Verify all cards are readable, icon backgrounds are visible
10. **Preferences page:** Check all text has proper contrast

**Contrast verification:**
11. In Dark mode, verify text is clearly readable (not too dim)
12. Check that focus indicators (tab through interactive elements) are visible
13. Verify table headers are distinguishable from table rows

**Reduced motion test:**
14. In browser DevTools > Rendering > Emulate CSS media feature `prefers-reduced-motion: reduce`
15. Toggle theme - should switch instantly without transition

**Expected behavior:**
- All surfaces use dark backgrounds (not white)
- All text is readable with good contrast
- Hover states provide visible feedback
- Focus rings are clearly visible
- No hardcoded white/light gray backgrounds in dark mode
  </how-to-verify>
  <resume-signal>
Type "approved" if dark mode works correctly across all pages.
If issues found, describe the specific component and problem (e.g., "KPI card title too dim", "Table header blends with rows").
  </resume-signal>
</task>

</tasks>

<verification>
After both tasks complete:
1. `npm run build --prefix frontend` passes
2. index.css contains transition-colors and prefers-reduced-motion rules
3. Human verification confirms visual quality across all pages
4. No hardcoded slate/white colors remain (verified via grep in prior plans)
</verification>

<success_criteria>
- Theme transition is smooth (200ms duration)
- Reduced motion preference is respected
- All pages display correctly in dark mode (human verified)
- Text contrast meets WCAG AA (4.5:1 minimum)
- Focus indicators are visible in dark mode
- No visual glitches during theme switching
- All requirements DARK-05 through DARK-19 are satisfied
</success_criteria>

<output>
After completion, create `.planning/phases/02-component-dark-mode-coverage/02-06-SUMMARY.md`
</output>
