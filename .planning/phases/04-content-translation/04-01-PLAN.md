---
phase: 04
wave: 1
depends_on: []
files_modified:
  - frontend/src/i18n.ts
  - frontend/src/components/layout/Sidebar.tsx
  - frontend/src/components/layout/Header.tsx
  - frontend/public/locales/en/common.json
  - frontend/public/locales/zh-TW/common.json
autonomous: true
---

# 04-01: Translate Common UI and Navigation

## Goal
Implement translations for the application shell, including the Sidebar navigation and Header components, and establish the `common` namespace structure.

## Context
The application currently uses hardcoded English strings in the Sidebar and Header. We need to extract these strings into `common.json` and use the `useTranslation` hook to display them dynamically based on the selected language.

## Tasks

<task type="auto">
  <name>Update i18n configuration</name>
  <files>frontend/src/i18n.ts</files>
  <action>
    Update `frontend/src/i18n.ts` to ensure `ns` array includes 'common' and verify backend loading configuration for multiple namespaces.
  </action>
  <verify>
    Read `frontend/src/i18n.ts` and confirm it imports or defines the 'common' namespace correctly.
  </verify>
  <done>
    `i18n` configuration supports the common namespace.
  </done>
</task>

<task type="auto">
  <name>Create common locale files</name>
  <files>frontend/public/locales/en/common.json, frontend/public/locales/zh-TW/common.json</files>
  <action>
    Create `frontend/public/locales/en/common.json` and `frontend/public/locales/zh-TW/common.json`.
    Populate them with keys for:
    - Navigation: `nav.dashboard`, `nav.teachers`, `nav.schools`, `nav.documents`, `nav.settings`
    - Actions: `actions.save`, `actions.cancel`, `actions.edit`, `actions.delete`, `actions.confirm`, `actions.search`, `actions.filter`
    - User: `user.profile`, `user.logout`, `user.notifications`
    - App: `app.name` (FETMS)
  </action>
  <verify>
    Read both JSON files to ensure they contain the specified keys and valid JSON syntax.
  </verify>
  <done>
    Common locale files created for English and Traditional Chinese.
  </done>
</task>

<task type="auto">
  <name>Translate Sidebar component</name>
  <files>frontend/src/components/layout/Sidebar.tsx</files>
  <action>
    Refactor `frontend/src/components/layout/Sidebar.tsx` to import `useTranslation` hook.
    Replace hardcoded navigation labels with `t('nav.key')` calls.
  </action>
  <verify>
    Read `frontend/src/components/layout/Sidebar.tsx` and check for `useTranslation` usage and absence of hardcoded strings like "Dashboard", "Teachers".
  </verify>
  <done>
    Sidebar component uses i18n for navigation items.
  </done>
</task>

<task type="auto">
  <name>Translate Header component</name>
  <files>frontend/src/components/layout/Header.tsx</files>
  <action>
    Refactor `frontend/src/components/layout/Header.tsx` to import `useTranslation` hook.
    Replace hardcoded strings (breadcrumb roots, user menu items) with `t('key')`.
  </action>
  <verify>
    Read `frontend/src/components/layout/Header.tsx` and check for `useTranslation` usage.
  </verify>
  <done>
    Header component uses i18n for UI elements.
  </done>
</task>

## Verification
- [ ] Sidebar navigation items show "Dashboard" in English and "儀表板" (or appropriate translation) in Chinese.
- [ ] Sidebar items show "Teachers" / "教師", "Schools" / "學校", "Settings" / "設定".
- [ ] Header user menu shows "Profile" / "個人資料", "Logout" / "登出".
- [ ] No missing key warnings in console.

## Must Haves
- Sidebar navigation fully translated.
- Header user menu fully translated.
- Language switching updates these elements immediately.
